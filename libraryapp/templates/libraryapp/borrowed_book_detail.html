{% extends 'libraryapp/base.html' %}

{% block content %}
<div style="background: white; padding: 30px; border-radius: 5px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
    <h2>Borrowed Book Details</h2>
    
    <div style="margin-top: 30px;">
        <h3 style="color: #007bff; margin-bottom: 20px;">{{ borrow_record.book.title }}</h3>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 30px;">
            <div>
                <h4 style="margin-bottom: 15px; color: #333;">Book Information</h4>
                <p style="margin: 8px 0;"><strong>Author:</strong> {{ borrow_record.book.author }}</p>
                <p style="margin: 8px 0;"><strong>ISBN:</strong> {{ borrow_record.book.isbn }}</p>
                <p style="margin: 8px 0;"><strong>Published:</strong> {{ borrow_record.book.published_date|date:"F d, Y" }}</p>
            </div>
            
            <div>
                <h4 style="margin-bottom: 15px; color: #333;">Borrowing Information</h4>
                <p style="margin: 8px 0;"><strong>Borrowed on:</strong> {{ borrow_record.borrow_date|date:"F d, Y" }}</p>
                <p style="margin: 8px 0;"><strong>Due date:</strong> {{ due_date|date:"F d, Y" }}</p>
                <p style="margin: 8px 0;"><strong>Days borrowed:</strong> {{ days_borrowed }} days</p>
                
                {% if is_overdue %}
                    <div style="background-color: #f8d7da; color: #721c24; padding: 10px; border-radius: 5px; margin-top: 10px;">
                        <strong>⚠️ OVERDUE!</strong><br>
                        This book is {{ days_borrowed|add:"-14" }} days overdue. Please return it as soon as possible.
                    </div>
                {% else %}
                    {% comment %} <div style="background-color: #d4edda; color: #155724; padding: 10px; border-radius: 5px; margin-top: 10px;">
                        <strong>✓ On Time</strong><br>
                        You have {{ 14|add:days_borrowed|multiply:"-1" }} days left to return this book.
                    </div> {% endcomment %}
                {% endif %}
            </div>
        </div>
        
        {% if borrow_record.book.description %}
            <div style="margin-top: 30px;">
                <h4 style="margin-bottom: 15px; color: #333;">Description</h4>
                <p style="line-height: 1.6; color: #555;">{{ borrow_record.book.description }}</p>
            </div>
        {% endif %}
        
        <div style="margin-top: 40px; padding-top: 20px; border-top: 2px solid #eee;">
            <a href="{% url 'return_book' borrow_record.pk %}" class="btn btn-success" 
               onclick="return confirm('Are you sure you want to return this book?')">
                Return This Book
            </a>
            <a href="{% url 'borrowed_books' %}" class="btn" style="background-color: #6c757d;">
                Back to My Borrowed Books
            </a>
            <a href="{% url 'book_detail' borrow_record.book.pk %}" class="btn" style="background-color: #17a2b8;">
                View Book Page
            </a>
        </div>
    </div>
</div>
{% endblock %}